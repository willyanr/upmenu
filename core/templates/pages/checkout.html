{% load static %}
<!DOCTYPE html class="dark">
<html lang="pt-bt" class="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{{restaurant_user.name}} - Checkout</title>
    <link rel="icon" href="/img/fav-icon.png">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <!-- nice-select -->
    <!-- nice-select -->
    <link rel="stylesheet" href="{% static '/css/nice-select.css' %}">
    <!-- aos -->
    <link rel="stylesheet" href="{% static '/css/aos.css' %}">
    <!-- style -->
    <link rel="stylesheet" href="{% static '/css/style.css' %}">
    <!-- responsive -->
    <link rel="stylesheet" href="{% static '/css/responsive.css' %}">
    <!-- color -->
    <link rel="stylesheet" href="{% static '/css/color.css' %}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/6fa399b61e.js" crossorigin="anonymous"></script>
	<style>
        input, #email, #phone {
            background-color: #1f2937;
            border-radius: 25px !important;
            font-size: 12px !important;
            border: none !important;
            height: 45px !important;
            color: white !important;
            outline: none; /* Remove a borda de foco padr√£o */
        }
        
        /* Mant√©m o fundo escuro mesmo quando o input est√° em foco */
        input:focus, #email:focus, #phone:focus {
            background-color: #1f2937;
            border: none;
            outline: none;
            box-shadow: none; /* Remove o efeito de sombra de foco */
        }
        
	</style>


</head>

<body class="menu-layer dark:bg-gray-900">
    <!-- loader start-->
    <div class="page-loader">
        <div class="wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="shadow"></div>
            <div class="shadow"></div>
            <div class="shadow"></div>
          
        </div>
    </div>
    <!-- loader end-->

    <div class="bg-orange-600 w-full h-8 fixed top-0 left-0 z-40 text-center">
        <p class="text-xs text-white text-center py-2">Desconto de 10% para o Primeiro Pedido. üî•</p>
    </div>
    <header class="p-2 bg-gray-800">
        <div class="container mt-10">
            <div class="row align-items-center mb-1">
                <div class="col-xl-2">
                    <div class="header-style">
                        <img src="{% static 'images/logo/logo.png'%}" class="w-auto h-10" alt="">


                        </a>
                        <div class="extras bag">
                           
                            <div class="">
                                <a href="https://upmenu.online/delivery/restaurant/{{restaurant_user.restaurant_code}}/" class="text-xs text-white bg-red-600 px-5 py-1 rounded-2xl">Voltar ao card√°pio</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-7">
                    
                </div>
               
               
                <div class="mobile-nav hmburger-menu" id="mobile-nav" style="display:block;">


                    

                    <a href="JavaScript:void(0)" id="res-cross"></a>
                </div>
            </div>
        </div>
    </header>

    <section class="gap mt-4 bg-gray-800">
        <div class="container">
            <div class="row">
                <div class="col-xl-5 col-lg-12" data-aos="flip-up" data-aos-delay="200" data-aos-duration="300">
                    <div class="checkout-order">
                        <div class="title-checkout p-2">
                            <h2 class="text-white">Seu Pedido:</h2>
                            <h6>{{ items|length }}</h6>
                        </div>
                       
                        <ul id="order-items">
                            {% for item in items %}
                            <li class="price-list p-3 space-y-4">
                                <div class="flex items-center justify-between border-b border-gray-600 pb-3">
                                    <!-- Informa√ß√µes do Produto -->
                                    <div class="ml-4 flex-1 product-name">
                                        <h4 class="text-sm font-semibold text-gray-100">{{ item.name }}</h4>
                                        <p class="text-xs text-gray-400">Quantidade: {{ item.qty }}</p>
                                        <p class="total-price" style="opacity: 0;"> {{ item.price }}</p>
                                    </div>
                                </div>
                            </li>
                            {% empty %}
                            <li class="mt-5 text-center text-gray-400">Nenhum item no pedido.</li>
                            {% endfor %}
                        </ul>
                        
                        <div class="mb-4 p-3">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-300 font-medium">Total Pedido:</span>
                                <h5 id="total-order" class="text-lg font-semibold text-gray-200">{{ total_order }}</h5>
                            </div>
                            
                        </div>

                    </div>
                </div>

                <div class="offset-xl-1 col-xl-6 col-lg-12" data-aos="flip-up" data-aos-delay="300" data-aos-duration="400">
                    <h4 class="text-2xl text-white mb-3 font-bold ms-2">Escolha o m√©todo de entrega:</h4>
                    <div class="mb-4 p-2">
                        <select id="deliveryMethod" class="w-60 px-4 h-10 rounded-3xl justify-content-center bg-gray-900 text-white">
                            <option value="delivery" class="text-white bg-gray-900">Delivery</option>
                            <option value="pickup" class="text-white bg-gray-900">Retirada</option>
                        </select>
                    </div>
                    <form class="bg-gray-900 p-3 rounded-lg" id="checkout-form">
                        <h4 class="text-sm font-bold text-white mb-3">Informa√ß√µes Retirada</h4>
                        <input id="name" class="w-full px-4 h-12 mb-4 rounded-3xl" type="text" name="name" placeholder="Nome completo" required>
                        
                        <div class="row flex flex-wrap mb-4">
                            <div class="col-lg-6 w-full md:w-1/2 mb-4 md:mb-0">
                                <input class="w-full px-4 h-12 rounded-3xl" id="email" type="email" name="email" placeholder="E-mail" required>
                            </div>
                            <div class="col-lg-6 w-full md:w-1/2">
                                <input class="w-full px-4 h-12 rounded-3xl" id="phone" type="tel" name="phone" placeholder="Telefone" required>
                            </div>
                        </div>
                        
                        <h4 class="text-2xl text-white mt-3 mb-3">Endere√ßo</h4>
                        <select id="city" class="bg-red-600 w-full rounded-3xl py-2 p-3 mb-4">
                            <option class="text-white">{{restaurant_user.city}}</option>
                        </select>
                        
                        <input name="CEP" id="CEP" required pattern="\d{5}-\d{3}" maxlength="9" placeholder="CEP" class="w-full px-4 h-12 mb-4 rounded-3xl" />
                        
                        <input id="street" class="w-full px-4 h-12 mb-4 rounded-3xl" type="text" name="street" placeholder="Rua" required disabled>
                        
                        <div class="row mb-4">
                            <div class="col-lg-6 mb-4 md:mb-0">
                                <input id="house-number" class="w-full px-4 h-12 rounded-3xl" type="text" name="house-number" placeholder="N√∫mero da casa" required>
                            </div>
                        </div>
                        
                      
                        <textarea id="observation" rows="4" class="text-white block p-4 w-full text-sm text-gray-900 bg-gray-800 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 mb-4" placeholder="Ex: Remover algo, adicionar algo, pouco molho, etc..."></textarea>
                        
                        <div class="row">
                            <div class="col-lg-6 mb-4">
                                <input id="complement" class="w-full px-4 h-12 rounded-3xl" type="text" name="complement" placeholder="Bairro" required>
                                <span class="text-sm block mt-2 text-white">*Digite corretamente os dados</span>
                            </div>
                        </div>
                        <h4 class="text-sm text-white mt-3 mb-3">Vou pagar com:</h4>
                        <div class="nav nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                            <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Selecione:</button>
                        </div>
                        <div class="tab-content" id="v-pills-tabContent">
                            <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                                <label>
                                    <input type="radio" name="payment-method" value="PIX" checked>
                                    <img alt="checkbox-img" src="{% static 'img/pix.svg' %}">
                                </label>
                                <label>
                                    <input type="radio" name="payment-method" value="CARTAO">
                                    <img alt="checkbox-img" src="{% static 'img/card.svg' %}">
                                </label>
                                <label>
                                    <input type="radio" name="payment-method" value="DINHEIRO">
                                    <img alt="checkbox-img" src="{% static 'img/cash.svg' %}">
                                </label>
                                <p class="text-gray-700 text-sm font-medium mt-4"></p>
                                <!-- Corrigi a classe aqui -->
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-700 font-medium">Taxa de Entrega:</span>
                                    <h2 id="total-frete" class="text-2xl font-bold text-green-600"></h2>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-300 font-medium">Total a pagar:</span>
                                    <h2 id="total-payment" class="text-2xl font-bold text-green-600">R$ {{ total_payment }}</h2>
                                </div>
                                <label class="checkbox-one text-gray-400">Ao clicar voc√™ concorda com nossos termos e pol√≠tica.
                                    <input id="terms" type="checkbox" checked="checked">
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                        </div>
                        <button id="chk" type="submit" class="bg-red-600 py-2 w-full rounded-xl mt-4 text-white">Finalizar Pedido</button>
                    </form>
                    <div id="pickupForm" class="checkout-form bg-gray-900 hidden p-3 rounded-lg">
                        <h4 class="text-sm font-bold text-white mb-3">Informa√ß√µes Retirada</h4>
                        
                        <input id="namePickup" class="mb-1 w-full px-4 h-12 rounded-3xl" type="text" name="name" placeholder="Nome completo" required>
                        
                        <div class="row flex flex-wrap">
                            <div class="col-lg-6 p-2 w-full md:w-1/2">
                                <input class="w-full px-4 h-12 rounded-3xl" id="emailPickup" type="email" name="email" placeholder="E-mail" required>
                            </div>
                            <div class="col-lg-6 p-2 w-full md:w-1/2">
                                <input class="w-full px-4 h-12 rounded-3xl" id="phonePickup" type="tel" name="phone" placeholder="Telefone" required>
                            </div>
                        </div>
                        
                        <!-- Op√ß√µes de Pagamento -->
                        <div class="mb-4 mt-3">
                            <h4 class="text-sm font-bold text-white mb-2">Forma de Pagamento</h4>
                            <div class="flex flex-col space-y-2">
                                <label class="flex items-center cursor-pointer">
                                    <input  type="radio" name="payment-method-pickup" value="PIX" class="hidden peer">
                                    <div class="w-full flex items-center justify-between p-3 border-2 border-gray-500 rounded-lg bg-gray-800 hover:border-blue-500 peer-checked:border-blue-500 transition duration-200">
                                        <span class="text-white">Pix</span>
                                        <span class="text-blue-500">ü™ô</span> <!-- √çcone representando Pix -->
                                    </div>
                                </label>
                                <label class="flex items-center cursor-pointer">
                                    <input  type="radio" name="payment-method-pickup" value="CARTAO" class="hidden peer">
                                    <div class="w-full flex items-center justify-between p-3 border-2 border-gray-500 rounded-lg bg-gray-800 hover:border-blue-500 peer-checked:border-blue-500 transition duration-200">
                                        <span class="text-white">Cart√£o</span>
                                        <span class="text-blue-500">üí≥</span> <!-- √çcone representando Cart√£o -->
                                    </div>
                                </label>
                                <label class="flex items-center cursor-pointer">
                                    <input  type="radio" name="payment-method-pickup" value="DINHEIRO" class="hidden peer">
                                    <div class="w-full flex items-center justify-between p-3 border-2 border-gray-500 rounded-lg bg-gray-800 hover:border-blue-500 peer-checked:border-blue-500 transition duration-200">
                                        <span class="text-white">Dinheiro</span>
                                        <span class="text-blue-500">üíµ</span> <!-- √çcone representando Dinheiro -->
                                    </div>
                                </label>
                            </div>
                        </div>
                    
                        <div class="flex mb-4 mt-3">
                            <div class="flex items-center h-5">
                                <input id="helper-checkbox" aria-describedby="helper-checkbox-text" type="checkbox" checked value="" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                            </div>
                            <div class="ms-2 text-sm">
                                <label for="helper-checkbox" class="font-medium text-gray-900 dark:text-white text-white">Ao clicar voc√™ aceita com os termos.</label>
                                <p id="helper-checkbox-text" class="text-xs font-normal text-gray-500 dark:text-gray-400 mt-2">Pedidos ao restaurante eu concordo que s√≥ posso cancelar no tempo estipulado pelo restaurante de 05:00 minutos.</p>
                            </div>
                        </div>
                        
                        <div class="flex justify-center">
                            <button class="text-white font-bold text-sm bg-red-600 rounded-lg w-40 p-2" id="chk-pickup">Fazer pedido</button>
                        </div>
                    </div>
                    
                    
                </div>
            </div>
        </div>
    </section>

    <!-- footer -->
    <footer class="bg-gray-900 dark:bg-gray-900">
        <div class="container px-6 py-12 mx-auto">
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 sm:gap-y-10 lg:grid-cols-4">
                <div class="sm:col-span-2">
                    <h1 class="max-w-lg text-xl text-white font-semibold tracking-tight text-gray-800 xl:text-2xl dark:text-white">Teve algum problema com o restaurante?</h1>

                    <div class="flex flex-col mx-auto mt-6 space-y-3 md:space-y-0 md:flex-row">
                        <input id="email" type="text" class="px-4 py-2 text-gray-700 border rounded-xl dark:bg-gray-900 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-300 focus:outline-none focus:ring focus:ring-opacity-40 focus:ring-blue-300"
                        placeholder="Conte um pouco sobre o que aconteceu">

                        <button class="w-full px-6 py-2.5 text-sm font-medium tracking-wider text-white transition-colors duration-300 transform md:w-auto md:mx-4 focus:outline-none bg-red-600 rounded-xl hover:bg-gray-700 focus:ring focus:ring-gray-300 focus:ring-opacity-80">
                            Preciso de suporte
                        </button>
                    </div>
                </div>

                <div>
                    <p class="font-semibold text-white dark:text-white">upMenu</p>

                    <div class="flex flex-col items-start mt-2 space-y-2">
                        <a href="https://upmenu.online/home/" class="text-gray-600 transition-colors duration-300 dark:text-gray-300 dark:hover:text-blue-400 hover:underline hover:text-blue-500">Quem somos?</a>
                        <a href="https://upmenu.online/home/#pricing" class="text-gray-600 transition-colors duration-300 dark:text-gray-300 dark:hover:text-blue-400 hover:underline hover:text-blue-500">Planos</a>
                        <a href="#" class="text-gray-600 transition-colors duration-300 dark:text-gray-300 dark:hover:text-blue-400 hover:underline hover:text-blue-500"></a>
                    </div>
                </div>

                <div>
                    <p class="font-semibold text-white dark:text-white">Links √öteis</p>

                    <div class="flex flex-col items-start mt-2 space-y-2">
                        <a href="#" class="text-gray-600 transition-colors duration-300 dark:text-gray-300 dark:hover:text-blue-400 hover:underline hover:text-blue-500">Pol√≠ticas de Privacidade</a>
                        <a href="#" class="text-gray-600 transition-colors duration-300 dark:text-gray-300 dark:hover:text-blue-400 hover:underline hover:text-blue-500">Termos e Condi√ß√µes</a>
                        <a href="https://upmenu.online/home/" class="text-gray-600 transition-colors duration-300 dark:text-gray-300 dark:hover:text-blue-400 hover:underline hover:text-blue-500">Perguntas Frequentes</a>
                    </div>
                </div>
            </div>

            <hr class="my-6 border-gray-200 md:my-8 dark:border-gray-700">

            <div class="flex items-center justify-between">
                <a href="#">
                    <img class="w-auto h-14" src="{% static 'images/logo/logo.png' %}" alt="">
                </a>

                <div class="flex -mx-2">
                    <a href="#" class="mx-2 text-gray-600 transition-colors duration-300 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400" aria-label="Reddit">
                        <svg class="w-5 h-5 fill-current" viewBox="0 -3 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <title>youtube [#ff0000]</title>
                                <desc>Created with Sketch.</desc>
                                <defs> </defs>
                                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <g id="Dribbble-Light-Preview" transform="translate(-300.000000, -7442.000000)" fill="#ff0000">
                                        <g id="icons" transform="translate(56.000000, 160.000000)">
                                            <path d="M251.988432,7291.58588 L251.988432,7285.97425 C253.980638,7286.91168 255.523602,7287.8172 257.348463,7288.79353 C255.843351,7289.62824 253.980638,7290.56468 251.988432,7291.58588 M263.090998,7283.18289 C262.747343,7282.73013 262.161634,7282.37809 261.538073,7282.26141 C259.705243,7281.91336 248.270974,7281.91237 246.439141,7282.26141 C245.939097,7282.35515 245.493839,7282.58153 245.111335,7282.93357 C243.49964,7284.42947 244.004664,7292.45151 244.393145,7293.75096 C244.556505,7294.31342 244.767679,7294.71931 245.033639,7294.98558 C245.376298,7295.33761 245.845463,7295.57995 246.384355,7295.68865 C247.893451,7296.0008 255.668037,7296.17532 261.506198,7295.73552 C262.044094,7295.64178 262.520231,7295.39147 262.895762,7295.02447 C264.385932,7293.53455 264.28433,7285.06174 263.090998,7283.18289"
                                            id="youtube-[#ff0000]"> </path>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </a>

                    <a href="#" class="mx-2 text-gray-600 transition-colors duration-300 dark:text-red-600 hover:text-blue-500 dark:hover:text-blue-400" aria-label="Facebook">
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.00195 12.002C2.00312 16.9214 5.58036 21.1101 10.439 21.881V14.892H7.90195V12.002H10.442V9.80204C10.3284 8.75958 10.6845 7.72064 11.4136 6.96698C12.1427 6.21332 13.1693 5.82306 14.215 5.90204C14.9655 5.91417 15.7141 5.98101 16.455 6.10205V8.56104H15.191C14.7558 8.50405 14.3183 8.64777 14.0017 8.95171C13.6851 9.25566 13.5237 9.68693 13.563 10.124V12.002H16.334L15.891 14.893H13.563V21.881C18.8174 21.0506 22.502 16.2518 21.9475 10.9611C21.3929 5.67041 16.7932 1.73997 11.4808 2.01722C6.16831 2.29447 2.0028 6.68235 2.00195 12.002Z">
                            </path>
                        </svg>
                    </a>

                    <a href="#" class="mx-2 text-gray-600 transition-colors duration-300 dark:text-gray-300 hover:text-blue-500 dark:hover:text-blue-400" aria-label="Github">
                        <svg class="w-5 h-5 fill-current" viewBox="0 0 24.00 24.00" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ff0000" stroke-width="0.00024000000000000003">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"
                                fill="#ff0000"></path>
                                <path d="M18 5C17.4477 5 17 5.44772 17 6C17 6.55228 17.4477 7 18 7C18.5523 7 19 6.55228 19 6C19 5.44772 18.5523 5 18 5Z" fill="#ff0000"></path>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M1.65396 4.27606C1 5.55953 1 7.23969 1 10.6V13.4C1 16.7603 1 18.4405 1.65396 19.7239C2.2292 20.8529 3.14708 21.7708 4.27606 22.346C5.55953 23 7.23969 23 10.6 23H13.4C16.7603 23 18.4405 23 19.7239 22.346C20.8529 21.7708 21.7708 20.8529 22.346 19.7239C23 18.4405 23 16.7603 23 13.4V10.6C23 7.23969 23 5.55953 22.346 4.27606C21.7708 3.14708 20.8529 2.2292 19.7239 1.65396C18.4405 1 16.7603 1 13.4 1H10.6C7.23969 1 5.55953 1 4.27606 1.65396C3.14708 2.2292 2.2292 3.14708 1.65396 4.27606ZM13.4 3H10.6C8.88684 3 7.72225 3.00156 6.82208 3.0751C5.94524 3.14674 5.49684 3.27659 5.18404 3.43597C4.43139 3.81947 3.81947 4.43139 3.43597 5.18404C3.27659 5.49684 3.14674 5.94524 3.0751 6.82208C3.00156 7.72225 3 8.88684 3 10.6V13.4C3 15.1132 3.00156 16.2777 3.0751 17.1779C3.14674 18.0548 3.27659 18.5032 3.43597 18.816C3.81947 19.5686 4.43139 20.1805 5.18404 20.564C5.49684 20.7234 5.94524 20.8533 6.82208 20.9249C7.72225 20.9984 8.88684 21 10.6 21H13.4C15.1132 21 16.2777 20.9984 17.1779 20.9249C18.0548 20.8533 18.5032 20.7234 18.816 20.564C19.5686 20.1805 20.1805 19.5686 20.564 18.816C20.7234 18.5032 20.8533 18.0548 20.9249 17.1779C20.9984 16.2777 21 15.1132 21 13.4V10.6C21 8.88684 20.9984 7.72225 20.9249 6.82208C20.8533 5.94524 20.7234 5.49684 20.564 5.18404C20.1805 4.43139 19.5686 3.81947 18.816 3.43597C18.5032 3.27659 18.0548 3.14674 17.1779 3.0751C16.2777 3.00156 15.1132 3 13.4 3Z"
                                fill="#ff0000"></path>
                            </g>
                        </svg>
                    </a>
                </div>
            </div>
            <p class="text-white ms-2 mt-3"><strong>CNPJ: 50.243.271/0001-46</strong> </p>
            <p class="text-gray-400 text-start text-xs ms-2">A <strong>upMenu</strong> n√£o oferece produtos pr√≥prios. Todos os produtos dispon√≠veis no menu s√£o de exclusiva propriedade e responsabilidade dos restaurantes cadastrados na nossa plataforma de delivery. As publicidades e propagandas relacionadas
                aos produtos s√£o de responsabilidade dos respectivos restaurantes.</p>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
        			const cepInput = document.getElementById('CEP');
                    let freightCost = 10.00;


        			cepInput.addEventListener('input', (event) => {
                        let value = event.target.value.replace(/\D/g, '');
                        if (value.length > 5) {
                            value = value.slice(0, 5) + '-' + value.slice(5, 8);
                        }
                        event.target.value = value;
                
                        let cityUser = document.getElementById('city').value;
                
                        if (value.length === 9) {
                            fetch('/delivery/get-cep/', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'X-CSRFToken': getCookie('csrftoken')
                                },
                                body: JSON.stringify({ cep: value, city: cityUser })
                            })
                            .then(response => response.json())
                            .then(data => {
                           
                
                                if (data.success) {
                                
                                    document.getElementById('street').value = data.address;
                                    document.getElementById('complement').value = data.district;
                                    document.getElementById('city').value = data.city;
                
                               
                                    const totalOrderElement = document.getElementById('total-order');
                                    const totalPaymentElement = document.getElementById('total-payment');
                                    const totalFreteElement = document.getElementById('total-frete');
                
                                    let totalOrderText = totalOrderElement.textContent.trim();
                                    console.log('Valor total do pagamento:', totalOrderText);
                
                                    
                                    let valueOrderTotal = parseFloat(totalOrderText.replace('R$', '').trim().replace(',', '.'));
                                    console.log('Valor total convertido:', valueOrderTotal);
                
                                    if (isNaN(valueOrderTotal)) {
                                        console.error('O valor total do pedido n√£o √© um n√∫mero v√°lido.');
                                        return;
                                    }
                
                                  
                                    freightCost = parseFloat(data.cost.toFixed(2));
                                    console.log('Custo do frete:', freightCost);
                
                                    if (isNaN(freightCost)) {
                                        console.error('O custo do frete n√£o √© um n√∫mero v√°lido.');
                                        return;
                                    }
                
                           
                                    totalFreteElement.textContent = `R$ ${freightCost.toFixed(2).replace('.', ',')}`;
                
                                    let newTotal = valueOrderTotal + freightCost;
                                    console.log('Novo valor total (pedido + frete):', newTotal);
                
                        
                                    totalPaymentElement.textContent = `R$ ${newTotal.toFixed(2).replace('.', ',')}`;
                                }
                            })
                            .catch(error => {
                                console.error("Erro na requisi√ß√£o:", error);
                            });
                        }
                    });
        		
        			document.getElementById('chk').addEventListener('click', function (event) {
        				event.preventDefault(); 
        		
        		
        				const name = document.querySelector('#name').value;
        				const email = document.querySelector('#email').value;
        				const phone = document.querySelector('#phone').value;
        				const city = document.querySelector('#city').value;
        				const street = document.querySelector('#street').value;
        				const houseNumber = document.querySelector('#house-number').value;
        				const complement = document.querySelector('#complement').value;
                        const cep = document.querySelector('#CEP').value;
        				const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
        				const termsAccepted = document.querySelector('#terms').checked;
        		
        				const items = Array.from(document.querySelectorAll('#order-items .price-list')).map(item => {
                            return {
                                name: item.querySelector('.product-name h4').textContent.trim(),
                                price: parseFloat(item.querySelector('.total-price').textContent.trim().replace('R$', '').replace(',', '.')), // Converte o pre√ßo para float
                                qty: parseInt(item.querySelector('.product-name p').textContent.match(/Quantidade: (\d+)/)[1]) // Captura a quantidade
                            };
                        });
        		



                        const totalOrderElement = document.querySelector('#total-order');
                        const totalOrderText = totalOrderElement.textContent.trim();
                        let totalOrder = parseFloat(totalOrderText.replace('R$', '').trim().replace(',', '.'));
         
                        const totalPaymentElement = document.querySelector('#total-payment');
                        const totalPaymentText = totalPaymentElement.textContent.trim();
                        const observation = document.getElementById('observation').value;
                        let totalPayment = parseFloat(totalPaymentText.replace('R$', '').trim().replace(',', '.'));

                 
                        const orderData = {
                            name,
                            email,
                            phone,
                            city,
                            street,
                            houseNumber,
                            complement,
                            paymentMethod,
                            termsAccepted,
                            items,
                            cep,
                            totalOrder: totalOrder.toFixed(2).replace('.', ','),
                            totalPayment: totalPayment.toFixed(2).replace('.', ','),
                            frete: freightCost,
                            observation: observation 
                        };
                        
                        const urlParts = window.location.pathname.split('/');
                        const restaurantUUID = urlParts[urlParts.indexOf('checkout') + 1];
                        

                        if (!name || !email || !phone || !city || !street || !houseNumber || !complement || !cep || !paymentMethod) {
                            alert('Por favor, preencha todos os campos obrigat√≥rios.');
                            return;
                        }
                        
                  
                        if (!paymentMethod) {
                            alert('Por favor, selecione um m√©todo de pagamento.');
                            return;
                        }
                        
                  
                        fetch(`/delivery/checkout/${restaurantUUID}/`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-CSRFToken': getCookie('csrftoken')
                            },
                            body: JSON.stringify(orderData)
                        })
                            .then(response => response.json())
                            .then(data => {
                                console.log(data); 
                                if (data.success && data.id) {
                                    window.location.href = `/delivery/sucess-order/${data.id}`; // Redireciona para a p√°gina de sucesso
                      
                                }
                            })
                            .catch(error => {
                                console.error('Erro:', error);
                                alert('Erro ao realizar o pedido. Tente novamente.');
                            });

                        
        
        			});

                    document.getElementById('deliveryMethod').addEventListener('change', function () {
                        var selectedMethod = this.value;
                        var deliveryForm = document.getElementById('checkout-form')
                        var pickupForm = document.getElementById('pickupForm');
                        
                        if (selectedMethod === 'delivery') {
                            deliveryForm.classList.remove('hidden');
                            pickupForm.classList.add('hidden');
                        } else if (selectedMethod === 'pickup') {
                            deliveryForm.classList.add('hidden');
                            pickupForm.classList.remove('hidden');
                        }
                    });

                    document.getElementById('chk-pickup').addEventListener('click', function (event) {
                        event.preventDefault(); 
                    
                        const name = document.querySelector('#namePickup').value.trim();
                        const email = document.querySelector('#emailPickup').value.trim();
                        const phone = document.querySelector('#phonePickup').value.trim();
                        const paymentMethodPickup = document.querySelector('input[name="payment-method-pickup"]:checked')?.value; // Verifica se algum m√©todo est√° selecionado
                        const termsAccepted = document.querySelector('#terms').checked;
                    
                        const items = Array.from(document.querySelectorAll('#order-items .price-list')).map(item => {
                            return {
                                name: item.querySelector('.product-name h4').textContent.trim(),
                                price: parseFloat(item.querySelector('.total-price').textContent.trim().replace('R$', '').replace(',', '.')), // Converte o pre√ßo para float
                                qty: parseInt(item.querySelector('.product-name p').textContent.match(/Quantidade: (\d+)/)[1]) // Captura a quantidade
                            };
                        });
                    
                        const totalOrderElement = document.querySelector('#total-order');
                        const totalOrderText = totalOrderElement.textContent.trim();
                        let totalOrder = parseFloat(totalOrderText.replace('R$', '').trim().replace(',', '.'));
                    
                        const observation = document.getElementById('observation').value.trim();
                    
                        const orderData = {
                            name,
                            email,
                            phone,
                            paymentMethod: paymentMethodPickup,  // Corrigi para bater com o backend
                            termsAccepted,
                            items,
                            totalOrder: totalOrder.toFixed(2).replace('.', ','),
                            observation
                        };
                    
                        const urlParts = window.location.pathname.split('/');
                        const restaurantUUID = urlParts[urlParts.indexOf('checkout') + 1];
                    
                        if (!name || !email || !phone || !paymentMethodPickup) {
                            alert('Por favor, preencha todos os campos obrigat√≥rios.');
                            return;
                        }
                    
                        fetch(`/delivery/order/pickup/${restaurantUUID}/`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-CSRFToken': getCookie('csrftoken')
                            },
                            body: JSON.stringify(orderData)
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.success && data.id) {
                                // Redireciona para a p√°gina de sucesso com o ID do pedido
                                window.location.href = `/delivery/sucess-order/${data.id}`; 
                            } else {
                                alert('Erro ao realizar o pedido. Tente novamente.');
                            }
                        })
                        .catch(error => {
                            alert('Erro ao realizar o pedido. Tente novamente.');
                        });
                    });
                    
        		
        			
        			function getCookie(name) {
        				let cookieValue = null;
        				if (document.cookie && document.cookie !== '') {
        					const cookies = document.cookie.split(';');
        					for (let i = 0; i < cookies.length; i++) {
        						const cookie = cookies[i].trim();
        						if (cookie.substring(0, name.length + 1) === (name + '=')) {
        							cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
        							break;
        						}
        					}
        				}
        				return cookieValue;
        			}
        		});
    </script>
    <!-- bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <!-- jQuery -->
    <script src="{% static '/js/jquery-3.6.0.min.js' %}"></script>
    <script src="{% static '/js/jquery.nice-select.min.js' %}"></script>
    <script src="{% static '/js/aos.js' %}"></script>
    <script src="{% static '/js/custom.js' %}"></script>
</body>